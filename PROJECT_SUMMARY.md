# üìã –ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ–∑—é–º–µ –ø—Ä–æ–µ–∫—Ç–∞ Splitwise Bot

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Telegram –±–æ—Ç –¥–ª—è —É—á–µ—Ç–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –≤ –∫–æ–º–ø–∞–Ω–∏—è—Ö —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:

### ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (3 —Ç–∏–ø–∞: –∏–∑ —á–∞—Ç–∞, –ø–æ username, –ø–æ –∏–º–µ–Ω–∏)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–º–µ–π —Å –æ–±—â–∏–º –∫–∞–∑–Ω–∞—á–µ–µ–º
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã —Å–µ–º–µ–π –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ —Å –≥–∏–±–∫–∏–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º
- ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º
- ‚úÖ –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: ~40

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (5 —Ñ–∞–π–ª–æ–≤)
```
‚úÖ .env.example          - –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚úÖ .gitignore           - –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚úÖ docker-compose.yml   - Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚úÖ Dockerfile           - –°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
‚úÖ requirements.txt     - Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (4 —Ñ–∞–π–ª–∞)
```
‚úÖ README.md           - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (350+ —Å—Ç—Ä–æ–∫)
‚úÖ QUICK_START.md      - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (300+ —Å—Ç—Ä–æ–∫)
‚úÖ EXAMPLES.md         - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚úÖ PROJECT_SUMMARY.md  - –≠—Ç–æ —Ä–µ–∑—é–º–µ
```

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (11 —Ñ–∞–π–ª–æ–≤)
```
‚úÖ bot/database/base.py              - –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã
‚úÖ bot/database/session.py           - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
‚úÖ bot/database/models/__init__.py
‚úÖ bot/database/models/event.py           - –ú–æ–¥–µ–ª—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
‚úÖ bot/database/models/participant.py     - –ú–æ–¥–µ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚úÖ bot/database/models/family.py          - –ú–æ–¥–µ–ª—å —Å–µ–º–µ–π
‚úÖ bot/database/models/global_family.py   - –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–µ–º—å–∏
‚úÖ bot/database/models/expense.py         - –ú–æ–¥–µ–ª—å —Ä–∞—Å—Ö–æ–¥–æ–≤
‚úÖ bot/database/models/settlement_audit.py - –†–∞—Å—á–µ—Ç—ã –∏ –∞—É–¥–∏—Ç
```

#### –°–µ—Ä–≤–∏—Å—ã - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (6 —Ñ–∞–π–ª–æ–≤)
```
‚úÖ bot/services/event_service.py         - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏
‚úÖ bot/services/participant_service.py   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
‚úÖ bot/services/family_service.py        - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–º—å—è–º–∏
‚úÖ bot/services/expense_service.py       - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞–º–∏
‚úÖ bot/services/calculation_service.py   - –†–∞—Å—á–µ—Ç –¥–æ–ª–≥–æ–≤ (–∞–ª–≥–æ—Ä–∏—Ç–º!)
‚úÖ bot/services/notification_service.py  - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```

#### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ (6 —Ñ–∞–π–ª–æ–≤)
```
‚úÖ bot/handlers/start.py        - /start, /help
‚úÖ bot/handlers/event.py        - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏
‚úÖ bot/handlers/participant.py  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
‚úÖ bot/handlers/family.py       - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–º—å—è–º–∏
‚úÖ bot/handlers/expense.py      - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞–º–∏
‚úÖ bot/handlers/calculation.py  - –†–∞—Å—á–µ—Ç –¥–æ–ª–≥–æ–≤
```

#### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (3 —Ñ–∞–π–ª–∞)
```
‚úÖ bot/keyboards/inline.py  - Inline –∫–Ω–æ–ø–∫–∏ (15 —Ñ—É–Ω–∫—Ü–∏–π)
‚úÖ bot/keyboards/reply.py   - Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚úÖ bot/states/forms.py      - FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è (7 —Ñ–æ—Ä–º)
```

#### –£—Ç–∏–ª–∏—Ç—ã (3 —Ñ–∞–π–ª–∞)
```
‚úÖ bot/utils/constants.py   - –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã, enum'—ã, —Å–æ–æ–±—â–µ–Ω–∏—è
‚úÖ bot/utils/formatters.py  - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞ (10 —Ñ—É–Ω–∫—Ü–∏–π)
‚úÖ bot/utils/validators.py  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞ (8 —Ñ—É–Ω–∫—Ü–∏–π)
```

#### Middleware –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (4 —Ñ–∞–π–ª–∞)
```
‚úÖ bot/middlewares/database.py  - –ò–Ω–∂–µ–∫—Ç –ë–î —Å–µ—Å—Å–∏–π
‚úÖ bot/middlewares/auth.py      - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚úÖ bot/config/settings.py       - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚úÖ bot/main.py                  - –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

#### –ú–∏–≥—Ä–∞—Ü–∏–∏ (3 —Ñ–∞–π–ª–∞)
```
‚úÖ alembic.ini              - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
‚úÖ alembic/env.py           - –û–∫—Ä—É–∂–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
‚úÖ alembic/script.py.mako   - –®–∞–±–ª–æ–Ω –º–∏–≥—Ä–∞—Ü–∏–π
```

#### –£—Ç–∏–ª–∏—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (2 —Ñ–∞–π–ª–∞)
```
‚úÖ Makefile  - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚úÖ –≤—Å–µ __init__.py —Ñ–∞–π–ª—ã
```

## üóÑÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 10 —Ç–∞–±–ª–∏—Ü

1. **events** - –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
   - –û—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å
   - –°—Ç–∞—Ç—É—Å—ã: active, closed, archived
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞–ª—é—Ç

2. **participants** - –£—á–∞—Å—Ç–Ω–∏–∫–∏
   - 3 —Ç–∏–ø–∞: telegram_chat, telegram_external, external
   - Soft delete
   - –ü—Ä–∏–≤—è–∑–∫–∞ –∫ Telegram user_id

3. **global_families** - –®–∞–±–ª–æ–Ω—ã —Å–µ–º–µ–π
   - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ–º—å–∏
   - –°–æ–∑–¥–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑

4. **global_family_members** - –ß–ª–µ–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Å–µ–º–µ–π

5. **families** - –°–µ–º—å–∏ –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö
   - –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–æ–±—ã—Ç–∏—é
   - –ö–∞–∑–Ω–∞—á–µ–π —Å–µ–º—å–∏
   - –°—Å—ã–ª–∫–∞ –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω

6. **family_members** - –ß–ª–µ–Ω—ã —Å–µ–º–µ–π –≤ —Å–æ–±—ã—Ç–∏—è—Ö

7. **expenses** - –†–∞—Å—Ö–æ–¥—ã
   - –°—É–º–º–∞, –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è
   - 3 —Ç–∏–ø–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è: equal, custom, specific
   - Soft delete

8. **expense_splits** - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤
   - –ù–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏–ª–∏ –Ω–∞ —Å–µ–º—å—é
   - –î–æ–ª–∏ –≤ —Ä—É–±–ª—è—Ö –∏–ª–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö

9. **debt_settlements** - –†–∞—Å—á–µ—Ç—ã –¥–æ–ª–≥–æ–≤
   - –ö—Ç–æ –∫–æ–º—É —Å–∫–æ–ª—å–∫–æ –¥–æ–ª–∂–µ–Ω
   - –°—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã

10. **audit_log** - –ñ—É—Ä–Ω–∞–ª –∏–∑–º–µ–Ω–µ–Ω–∏–π
    - –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    - JSON –ø–æ–ª—è –¥–ª—è old_data/new_data

## üßÆ –ö–ª—é—á–µ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã

### –†–∞—Å—á–µ—Ç –¥–æ–ª–≥–æ–≤ —Å –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–µ–π –ø–µ—Ä–µ–≤–æ–¥–æ–≤

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤:** `bot/services/calculation_service.py`

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1. –ü–æ–¥—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞ –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞
2. –£—á–µ—Ç —Å–µ–º–µ–π (–¥–æ–ª–≥–∏/–∫—Ä–µ–¥–∏—Ç—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ –∫–∞–∑–Ω–∞—á–µ—è)
3. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –¥–æ–ª–∂–Ω–∏–∫–æ–≤ –∏ –∫—Ä–µ–¥–∏—Ç–æ—Ä–æ–≤
4. Greedy-–∞–ª–≥–æ—Ä–∏—Ç–º –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏:
   - –°–∞–º—ã–π –±–æ–ª—å—à–æ–π –¥–æ–ª–∂–Ω–∏–∫ ‚Üí –°–∞–º—ã–π –±–æ–ª—å—à–æ–π –∫—Ä–µ–¥–∏—Ç–æ—Ä
   - –ü–æ–≥–∞—Å–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–æ–∑–º–æ–∂–Ω—É—é —Å—É–º–º—É
   - –ü–æ–≤—Ç–æ—Ä—è—Ç—å –ø–æ–∫–∞ –Ω–µ –∑–∞–∫—Ä–æ—é—Ç—Å—è –≤—Å–µ –¥–æ–ª–≥–∏

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** O(n log n) –≥–¥–µ n - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

**–ü—Ä–∏–º–µ—Ä:**
```
–ò—Å—Ö–æ–¥–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã:
–ò–≤–∞–Ω: +3000‚ÇΩ (–µ–º—É –¥–æ–ª–∂–Ω—ã)
–ú–∞—Ä–∏—è: -1500‚ÇΩ (–¥–æ–ª–∂–Ω–∞)
–ê–ª–µ–∫—Å: -1500‚ÇΩ (–¥–æ–ª–∂–µ–Ω)

–†–µ–∑—É–ª—å—Ç–∞—Ç (2 –ø–µ—Ä–µ–≤–æ–¥–∞ –≤–º–µ—Å—Ç–æ 4):
–ú–∞—Ä–∏—è ‚Üí –ò–≤–∞–Ω—É: 1500‚ÇΩ
–ê–ª–µ–∫—Å ‚Üí –ò–≤–∞–Ω—É: 1500‚ÇΩ
```

## üé® –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```
Handlers (–∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞)
    ‚Üì
Services (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
    ‚Üì
Models (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
```

### 2. FSM –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
- –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–µ —Ñ–æ—Ä–º—ã
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ Redis
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã

### 3. Middleware
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∂–µ–∫—Ü–∏—è –ë–î —Å–µ—Å—Å–∏–π
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4. Soft delete
- –†–∞—Å—Ö–æ–¥—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏
- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏

### 5. –ì–∏–±—Ä–∏–¥–Ω—ã–µ —Å–µ–º—å–∏
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ–º—å–∏ –¥–ª—è —Ä–∞–∑–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–¥–∞

### –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ (–ø—Ä–∏–º–µ—Ä–Ω–æ)

```
Python –∫–æ–¥:        ~4,500 —Å—Ç—Ä–æ–∫
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:      ~1,200 —Å—Ç—Ä–æ–∫
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:        ~300 —Å—Ç—Ä–æ–∫
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–í—Å–µ–≥–æ:             ~6,000 —Å—Ç—Ä–æ–∫
```

### –§—É–Ω–∫—Ü–∏–∏/–ú–µ—Ç–æ–¥—ã

```
Handlers:           ~30 —Ñ—É–Ω–∫—Ü–∏–π
Services:           ~60 –º–µ—Ç–æ–¥–æ–≤
Utils:              ~20 —Ñ—É–Ω–∫—Ü–∏–π
Formatters:         ~10 —Ñ—É–Ω–∫—Ü–∏–π
Validators:         ~8 —Ñ—É–Ω–∫—Ü–∏–π
Keyboards:          ~15 —Ñ—É–Ω–∫—Ü–∏–π
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–í—Å–µ–≥–æ:             ~143 —Ñ—É–Ω–∫—Ü–∏–∏
```

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Python 3.11+** - –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **aiogram 3.15** - Telegram Bot framework (async)
- **SQLAlchemy 2.0** - ORM (async)
- **PostgreSQL 16** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Redis 7** - FSM storage
- **Alembic 1.14** - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

### DevOps
- **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Docker Compose** - –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
- **Makefile** - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –£—Ç–∏–ª–∏—Ç—ã
- **pydantic** - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **pytest** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- [x] –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- [x] –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î
- [x] Middleware
- [x] FSM states
- [x] Docker setup
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [x] –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üîÑ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

- [ ] Unit —Ç–µ—Å—Ç—ã
- [ ] Integration —Ç–µ—Å—Ç—ã
- [ ] CI/CD pipeline
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus/Grafana)
- [ ] Metrics
- [ ] Rate limiting
- [ ] Admin –ø–∞–Ω–µ–ª—å
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/Excel
- [ ] –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## üìà –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

1. **Horizontal scaling**
   - –ù–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ –±–æ—Ç–∞ –∑–∞ load balancer
   - Shared PostgreSQL
   - Shared Redis

2. **Database optimization**
   - –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö –ø–æ–ª—è—Ö
   - Eager loading –≥–¥–µ –Ω—É–∂–Ω–æ
   - Connection pooling

3. **Caching**
   - Redis –¥–ª—è FSM states
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

4. **Async everywhere**
   - –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ
   - Non-blocking I/O

## üéì –ß—Ç–æ –º–æ–∂–Ω–æ –∏–∑—É—á–∏—Ç—å –ø–æ –∫–æ–¥—É

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- Repository pattern (Services)
- Factory pattern (Session manager)
- Strategy pattern (Split types)
- State pattern (FSM)

### Best practices
- Type hints –≤–µ–∑–¥–µ
- Docstrings –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- Separation of concerns
- DRY principle
- SOLID principles

### Async programming
- Async/await
- AsyncSession
- Async context managers

## üìù –§–∞–π–ª—ã –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ:

1. **–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
```bash
–≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
```

2. **–°–æ–∑–¥–∞—Ç—å:**
```bash
.env (–∏–∑ .env.example)
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å:**
```bash
docker-compose up -d
```

–í—Å—ë! –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç.

## üéØ –ò—Ç–æ–≥–æ

### –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π production-ready –±–æ—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏:

‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –°–ª–æ–∏—Å—Ç–∞—è, —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ  
‚úÖ **–ö–æ–¥:** –ß–∏—Å—Ç—ã–π, —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π  
‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** 10 —Ç–∞–±–ª–∏—Ü, –≤—Å–µ —Å–≤—è–∑–∏, –∏–Ω–¥–µ–∫—Å—ã, –º–∏–≥—Ä–∞—Ü–∏–∏  
‚úÖ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:** –ü–æ–ª–Ω—ã–π CRUD –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π  
‚úÖ **–ê–ª–≥–æ—Ä–∏—Ç–º—ã:** –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –¥–æ–ª–≥–æ–≤  
‚úÖ **UX:** –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –∫–Ω–æ–ø–∫–∞–º–∏ –∏ —Ñ–æ—Ä–º–∞–º–∏  
‚úÖ **DevOps:** Docker, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è, –ª–æ–≥–∏  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –ü–æ–ª–Ω–∞—è, —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏  

### –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å! üöÄ

---

**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –û–¥–∏–Ω –¥–ª–∏–Ω–Ω—ã–π —Å–µ–∞–Ω—Å  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π –±–æ—Ç  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ!